# Carla 3D可视化与车辆跟踪系统
这是基于Carla 0.9.14仿真平台的可视化项目，适配Python 3.7.9，实现2D/3D车辆可视化、交通灯显示、天气控制、数据统计及车辆跟踪功能。

## 功能特点
- **多维度可视化**：2D车辆检测框（带距离标注）+ 3D车辆边界框（距离衰减效果）
- **交通灯可视化**：投影红绿灯3D位置，显示绿/黄/红/未知状态及文字
- **天气控制**：6种天气模式（晴/多云/雨/黄昏/雾/暴雨），支持自动/手动切换
- **数据统计**：实时绘制最近50帧车辆数量、最大距离折线图
- **交互控制**：键盘按键开关3D显示、交通灯显示等功能

## 环境要求
- 系统：Windows 10/11 / Linux（Ubuntu 18.04/20.04）
- Python：3.7.9
- Carla：0.9.14（服务端与Python库版本一致）

## 安装依赖
```bash
pip install -r requirements.txt
# 若Carla安装失败，用清华镜像：
# pip install carla==0.9.14 -i https://pypi.tuna.tsinghua.edu.cn/simple
```

## 运行步骤
1. 启动Carla 0.9.14服务端：
   ```bash
   # Windows
   CarlaUE4.exe -carla-rpc-port=2000
   # Linux
   ./CarlaUE4.sh -carla-rpc-port=2000
   ```
2. 运行项目：
   ```bash
   python main.py
   ```

## 键盘交互
| 按键 | 功能 |
|------|------|
| Q | 退出程序（自动清理资源） |
| 1-6 | 切换对应天气（1=晴，2=多云，3=雨，4=黄昏，5=雾，6=暴雨） |
| V | 开关车辆3D框显示 |
| T | 开关交通信号灯显示 |
| S | 开关红绿灯状态文字显示 |